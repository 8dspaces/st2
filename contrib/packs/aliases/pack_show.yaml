---
name: "pack_show"
action_ref: "packs.lookup"
description: "Get information about a StackStorm pack, either installed or available through the Exchange"
formats:
  - display: "pack show [available] {{ pack }}"
    representation:
      - "pack show {{ pack }}"
      - "pack show available {{ pack }}({{ location="available" }}){0}"

ack:
  enabled: false
result:
  format: |
    {% if execution.status == "succeeded" %}
      {% if execution.parameters.location == "installed" %}
        Getting back to you about the `{{ execution.parameters.pack }}` pack:{~}
        {% if execution.result.pack %}
          Full metadata:
          ```
          {{ execution.result.pack }}
          ```
          {% if execution.result.git_status %}

            Git status:
            ```
            {{ execution.result.git_status }}
            ```
          {% else %}
            This pack does not appear to be a git repository though.
          {% endif %}
        {% else %}
          Couldn't locate it in your installed packs.
          {% if not execution.result.available %}
            It's not on StackStorm Exchange either. What a sad world.
          {% endif %}
        {% endif %}
        {% if execution.result.available %}

            StackStorm Exchange has an entry for this pack. You can take a look:
            ```
            pack show available {{ execution.parameters.pack }}
            ```
            {% if not execution.result.pack %}
              Or ask me to install it for you right away:
              ```
              pack install {{ execution.parameters.pack }}
              ```
            {% endif %}
          {% endif %}
      {% else %}
        Getting back to you about the `{{ execution.parameters.pack }}` pack:{~}
        {% if execution.result.available %}
          Here's the full index entry for the pack:
          ```
          {{ execution.result.available }}
          ```
          Its source code is available at {{ execution.result.repo_url }}.

          To install the pack, just ask me:
          ```
          pack install {{ execution.parameters.pack }}
          ```
          If the pack is already installed, I will overwrite it with the latest version, keeping the config.
        {% else %}
          There's nothing like that on StackStorm Exchange.
          I know how sad it is, but life goes on. Cheer up!
        {% endif %}
      {% endif %}
    {% else %}
      Couldn't locate *{{execution.parameters.pack}}*. :({~}
    {% endif %}
